import{r as o,C as j,j as e}from"./index-DlIUVq6L.js";import{B as g}from"./Button-DiC9FGVk.js";import{A as x}from"./BaseUrl-6_kCCrH9.js";import{H as f,F as N}from"./Footer-BFT6y3Cf.js";import{E as C}from"./Error-Zn8Yz08z.js";import{a as E}from"./axios-B4uVmeYG.js";import"./auth-DQK_n-ws.js";function w({foods:t}){const s=o.useContext(j);function r(){s.addItem(t)}return e.jsx("li",{className:"food-item ",children:e.jsxs("div",{className:"item-card row",children:[e.jsx("div",{className:"col-md",children:e.jsx("img",{className:"rounded mt-2 ",src:`${x.FETCH_IMAGE}/${t.image}`,alt:t.name},t.id)}),e.jsxs("div",{children:[e.jsx("h3",{children:t.name}),e.jsx("p",{className:"food-item-description m-0",children:`- ${t.description.substring(0,60)} -`})]}),e.jsxs("div",{className:"row g-md-1 d-flex justify-content-md-center",children:[e.jsxs("dt",{className:"food-item-price col-md-7 col-sm m-sm-1",children:["â‚±",t.price]}),e.jsx(g,{className:"btn-outline-light col-md-7 col-sm p-0 ",onClick:r,children:"Add to Cart"})]})]})})}async function P(t,s){var r,a;try{return(await E(t,s)).data}catch(i){const d=((a=(r=i.response)==null?void 0:r.data)==null?void 0:a.message)||"Something went wrong, failed to send request.";throw new Error(d)}}const S=(t,s,r)=>{const[a,i]=o.useState(r),[d,l]=o.useState(!1),[m,c]=o.useState(),n=o.useCallback(async function(p){l(!0);try{const u=await P(t,{...s,body:p});i(u)}catch(u){c(u.message||"Something went wrong!")}l(!1)},[t,s]);return o.useEffect(()=>{(s&&(s.method==="GET"||!s.method)||!s)&&n()},[n,s]),{data:a,isLoading:d,error:m,sendRequest:n}},v=S,y={},h=6;function _(){const{data:t,isLoading:s,error:r}=v(x.FETCH_PRODUCTS,y,[]),[a,i]=o.useState(1);if(s)return e.jsx("p",{className:"h2 text-center",children:"Fetching products..."});if(r)return e.jsx(C,{title:"Failed to fetch Products",message:r});if(!t||!t.products)return e.jsx("p",{className:"text-center",children:"No products available"});const d=Math.ceil(t.products.length/h),l=t.products.slice((a-1)*h,a*h),m=c=>{i(c)};return e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsxs("main",{className:"container my-4",children:[e.jsx("h1",{className:"text-center mb-4",children:"Shop"}),e.jsx("p",{className:"h3 text-center mb-4",children:`Total Products: ${t.totalProducts}`}),e.jsx("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-2",children:l.map(c=>e.jsx("div",{className:"col d-flex justify-content-center",children:e.jsx(w,{foods:c})},c.id))}),e.jsx("div",{className:"d-flex justify-content-center mt-4",children:e.jsx("nav",{children:e.jsx("ul",{className:"pagination",children:Array.from({length:d},(c,n)=>e.jsx("li",{className:"page-item",children:e.jsx("button",{onClick:()=>m(n+1),className:`page-link ${a===n+1?"active":""}`,children:n+1})},n+1))})})})]}),e.jsx(N,{})]})}export{_ as default};
