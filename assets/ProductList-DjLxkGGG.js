import{j as e,r as a,C as f,U as N,a as b}from"./index-Bp8bEOyd.js";import{H as E,F as C}from"./Footer-BsB5Rv95.js";import{A as n}from"./BaseUrl-CbeK92AF.js";import{u as y,E as F}from"./useHttp-B0ONCVe0.js";import{B as m}from"./Button-DHfAvkIP.js";import{a as h}from"./axios-B4uVmeYG.js";import"./auth-JIh9HI6A.js";function I({className:i="",children:l,...o}){return e.jsx(e.Fragment,{children:e.jsx("table",{className:`table ${i}`,...o,children:l})})}const w={},D=()=>{a.useContext(f);const[i,l]=a.useState([]),[o,x]=a.useState([]);a.useState(!1),a.useContext(N),a.useState(null);const{user:j}=b(),{data:r,isLoading:p,error:d}=y(n.FETCH_ORDERS,w,[]);if(console.log(r),p)return e.jsx("p",{className:"h2",children:"Fetching product list data..."});if(d)return e.jsx(F,{title:"Failed to fetch Orders",message:d});const u=async t=>{try{await h.delete(`http://white-emu-581912.hostingersite.com/api/order/delete/${t}`),l(s=>s.filter(c=>c.id!==t)),window.location.reload()}catch(s){console.error("Failed to delete activity:",s)}},g=async t=>{try{await h.put(`http://white-emu-581912.hostingersite.com/api/order/update/${t}`),x(s=>s.filter(c=>c.id!==t))}catch(s){console.error("Failed to delete activity:",s)}};return e.jsxs("div",{className:"table-responsive small",children:[e.jsx("p",{className:"h2 text-center",children:"Product List"}),e.jsx("p",{className:"h3 text-warning col-md d-flex justify-content-md-end me-5",children:`Total Orders: ${r&&r.totalOrders}`}),e.jsxs(I,{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Item"}),e.jsx("th",{scope:"col",children:"Item Name"}),e.jsx("th",{scope:"col",children:"Price"}),e.jsx("th",{scope:"col",children:"Quantity"}),e.jsx("th",{scope:"col",children:"Target Date"}),e.jsx("th",{scope:"col",children:"Tracking #"}),e.jsx("th",{scope:"col",children:"Actions"})]})}),r&&r.orders&&r.orders.map(t=>e.jsx("tbody",{children:e.jsxs("tr",{className:"p-lg-5 ",children:[e.jsx("td",{children:e.jsx("img",{src:`${n.FETCH_IMAGE}/${j.imageUrl}`,alt:"image not available",style:{height:"10rem"}})}),e.jsx("td",{children:t.productName}),e.jsx("td",{children:t.firstName}),e.jsx("td",{children:t.lastName}),e.jsx("td",{children:t.targetDate}),e.jsx("td",{children:t.trackingNumber}),e.jsxs("td",{className:"row g-md-2",children:[e.jsx(m,{className:"btn-dark col-lg-12 p-md-4",onClick:()=>{g(t.id)},children:"Edit"}),e.jsx(m,{className:"btn-danger col-lg-12 p-md-4",onClick:()=>{u(t.id),alert(`${t.productName} Deleted`)},children:"Delete"})]})]})},t.id))]})]})},L=()=>e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsx(D,{}),e.jsx(C,{})]});export{L as default};
