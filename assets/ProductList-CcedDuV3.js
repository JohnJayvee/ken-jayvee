import{j as e,r,C,U as E,a as $}from"./index-BEVTC-w-.js";import{H as P,F as S}from"./Footer-BeCJlqby.js";import{A as D}from"./BaseUrl-6_kCCrH9.js";import{E as F}from"./Error-DCdUl1ii.js";import{B as p}from"./Button-DmfUAfPi.js";import{a as i}from"./axios-B4uVmeYG.js";import"./auth-DIC6NoV1.js";function O({className:o="",children:l,...c}){return e.jsx(e.Fragment,{children:e.jsx("table",{className:`table ${o}`,...c,children:l})})}const T=()=>{var u;r.useContext(C);const o=r.useContext(E),[l,c]=r.useState([]);r.useState([]),r.useState(!1),r.useState(null);const[j,d]=r.useState(!1),[a,f]=r.useState(null),[m,g]=r.useState(null),{user:n}=$(),h=n?n.id:0;r.useEffect(()=>{(async()=>{d(!0);try{const s=await i.get(`http://white-emu-581912.hostingersite.com/api/user/orders/${h}`,{headers:{"Content-Type":"application/json"}});f(s.data.user),console.log(s.data.user)}catch(s){g(s.message)}finally{d(!1)}})()},[h]);const N=async t=>{try{await i.delete(`http://white-emu-581912.hostingersite.com/api/order/delete/${t}`),c(s=>s.filter(b=>b.id!==t)),window.location.reload()}catch(s){console.error("Failed to delete activity:",s)}},y={headers:{Authorization:`Bearer ${n.token}`}},x=async t=>{try{const s=await i.get(`http://white-emu-581912.hostingersite.com/api/user/order/${t}`,y);o.setOrderData(s.data.order),console.log(s.data.order)}catch(s){console.error("Failed to update activity:",s)}};function w(t){o.showUpdateOrder(),x(t)}return j?e.jsx("p",{className:"h2 text-center",children:"Fetching product list data..."}):m?e.jsx(F,{className:"text-center text-dark",message:m}):e.jsxs("div",{className:"table-responsive small",children:[e.jsx("p",{className:"h2 text-center",children:"Product List"}),e.jsx("p",{className:"h3 text-warning col-md d-flex justify-content-md-end me-5",children:`Total Orders: ${(a==null?void 0:a.totalUserOrders)||0}`}),e.jsxs(O,{className:"table table-striped",children:[e.jsx("thead",{className:"text-center",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Item"}),e.jsx("th",{scope:"col",children:"Item Name"}),e.jsx("th",{scope:"col",children:"Quantity"}),e.jsx("th",{scope:"col",children:"Target Date"}),e.jsx("th",{scope:"col",children:"Total Price"}),e.jsx("th",{scope:"col",children:"Actions"})]})}),e.jsx("tbody",{className:"text-center",children:(u=a==null?void 0:a.orders)==null?void 0:u.map(t=>e.jsxs("tr",{className:"p-lg-5",children:[e.jsx("td",{children:e.jsx("img",{src:`${D.FETCH_IMAGE}/${t.image}`,alt:"image not available",style:{height:"10rem"}})}),e.jsx("td",{children:t.productName}),e.jsx("td",{children:t.quantity}),e.jsx("td",{children:t.targetDate}),e.jsx("td",{children:`â‚±${t.totalPrice}`}),e.jsxs("td",{className:"row d-flex justify-content-md-end me-2",children:[e.jsx(p,{className:"btn-dark col-md-7 mb-sm-2 p-sm-4",onClick:()=>{w(t.id),x(t.id)},children:"Edit"}),e.jsx(p,{className:"btn-danger col-md-7 p-sm-4 mb-sm-2",onClick:()=>{window.confirm(`Do you want to remove ${t.productName}?`)&&N(t.id)},children:"Delete"})]})]},t.id))})]})]})},H=()=>e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(T,{}),e.jsx(S,{})]});export{H as default};
