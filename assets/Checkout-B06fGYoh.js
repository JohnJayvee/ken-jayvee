import{r as d,C as N,U as f,j as e}from"./index-MXj4Meji.js";import{M as l}from"./Modal-B0cvb6lA.js";import{I as a}from"./InputBlock-B6HHqmAo.js";import{B as o}from"./Button-D_Nao9RA.js";import{u as y,E as b}from"./useHttp-D46QWFTR.js";import{A as g}from"./BaseUrl-CaOMfKxm.js";import"./axios-B4uVmeYG.js";const k={method:"POST",headers:{"Content-Type":"application/json"}};function D(){const i=d.useContext(N),s=d.useContext(f),{data:m,isLoading:h,error:r,sendRequest:x}=y(g.POST_PRODUCTS,k),u=i.items.reduce((n,t)=>n+t.quantity*t.price,0),p=async n=>{const t=new FormData(n.target),j=Object.fromEntries(t.entries()),C={order:{items:i.items,customer:j}};x(()=>{JSON.stringify(C)})};let c=e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"btn-danger",type:"button",onClick:()=>s.hideCheckout(),children:"Close"}),e.jsx(o,{className:"btn-dark mx-3",type:"submit",children:"Submit Order"})]});return h&&(c=e.jsx("span",{children:"Sending order data..."})),m&&!r?e.jsxs(l,{open:s.progress==="checkout",children:[e.jsx("p",{className:"h2",children:"Success!"}),e.jsx("p",{className:"h3 text-dark",children:"Order was submitted successfully"}),e.jsx("div",{className:"modal-actions",children:e.jsx(o,{className:"btn-dark",onClick:()=>s.hideCheckout(),children:"Okay"})})]}):e.jsx(l,{open:s.progress==="checkout",children:e.jsxs("form",{onSubmit:p,children:[e.jsx("h2",{children:"Checkout"}),e.jsxs("p",{className:"h2",children:["Total Amount: â‚±",u]}),e.jsx(a,{label:"First Name",type:"text",id:"firstName",name:"firstName"}),e.jsx(a,{label:"Last Name",type:"text",id:"lastName",name:"lastName"}),e.jsx(a,{label:"Email",type:"email",id:"email",name:"email"}),e.jsx(a,{label:"Address",type:"text",id:"address",name:"address"}),e.jsx("div",{className:"control-row",children:e.jsxs("label",{className:"h5",children:["Payment method",e.jsxs("select",{name:"paymentMethod",id:"paymentMethod",children:[e.jsx("option",{value:"cash",id:"paymentMethod",children:"Cash"}),e.jsx("option",{value:"cash",id:"paymentMethod",children:"Online Payment"})]})]})}),r&&e.jsx(b,{title:"Failed to Submit Order",message:r}),e.jsx("div",{className:"modal-actions",children:c})]})})}export{D as default};
