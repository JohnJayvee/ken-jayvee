import{r as o,C as p,j as e}from"./index-DevTugQe.js";import{B as j}from"./Button-CjOQrwZD.js";import{A as l}from"./BaseUrl-6_kCCrH9.js";import{H as f,F as g}from"./Footer-ZWlmAPu5.js";import{E as N}from"./Error-DaFX98DC.js";import{a as C}from"./axios-B4uVmeYG.js";import"./auth-CiGQs6yf.js";function E({foods:s}){const t=o.useContext(p);function r(){t.addItem(s)}return e.jsx("li",{className:"food-item ",children:e.jsxs("div",{className:"item-card row",children:[e.jsx("div",{className:"col-md",children:e.jsx("img",{className:"rounded mt-2 ",src:`${l.FETCH_IMAGE}/${s.image}`,alt:s.name},s.id)}),e.jsxs("div",{children:[e.jsx("h3",{children:s.name}),e.jsx("p",{className:"food-item-description m-0",children:`- ${s.description.substring(0,60)} -`})]}),e.jsxs("div",{className:"row g-md-1 d-flex justify-content-md-center",children:[e.jsxs("dt",{className:"food-item-price col-md-7 col-sm m-sm-1",children:["â‚±",s.price]}),e.jsx(j,{className:"btn-outline-light col-md-7 col-sm p-0 ",onClick:r,children:"Add to Cart"})]})]})})}async function w(s,t){var r,a;try{return(await C(s,t)).data}catch(n){const c=((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Something went wrong, failed to send request.";throw new Error(c)}}const F=(s,t,r)=>{const[a,n]=o.useState(r),[c,m]=o.useState(!1),[u,h]=o.useState(),d=o.useCallback(async function(x){m(!0);try{const i=await w(s,{...t,body:x});n(i)}catch(i){h(i.message||"Something went wrong!")}m(!1)},[s,t]);return o.useEffect(()=>{(t&&(t.method==="GET"||!t.method)||!t)&&d()},[d,t]),{data:a,isLoading:c,error:u,sendRequest:d}},S=F,y={};function R(){const{data:s,isLoading:t,error:r}=S(l.FETCH_PRODUCTS,y,[]);return t?e.jsx("p",{className:"h2",children:"Fetching products..."}):r?e.jsx(N,{title:"Failed to fetch Products",message:r}):e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"h1 text-center",children:"Shop"}),e.jsx("p",{className:"h3",children:`Total Products: ${s.totalProducts}`}),e.jsx("ul",{className:"row g-md-2 g-sm-2 ",id:"items",children:s&&s.products&&s.products.map(a=>e.jsx("div",{className:"col col-md-4 col-sm-6 d-flex justify-content-md-center  ",children:e.jsx(E,{foods:a},a.id)},a.id))})]}),e.jsx(g,{})]})}export{R as default};
