import{j as e,r,C as w,U as E,a as C}from"./index-HbZ0blC-.js";import{H as $,F}from"./Footer-CE9vz6BY.js";import{A as I}from"./BaseUrl-6_kCCrH9.js";import{E as P}from"./Error-CY7kY--y.js";import{B as p}from"./Button-ClVCMVd5.js";import{a as o}from"./axios-B4uVmeYG.js";import"./auth-D1904Pjf.js";function S({className:i="",children:c,...l}){return e.jsx(e.Fragment,{children:e.jsx("table",{className:`table ${i}`,...l,children:c})})}const T=()=>{var u;r.useContext(w);const[i,c]=r.useState([]),[l,j]=r.useState([]);r.useState(!1),r.useContext(E),r.useState(null);const[f,d]=r.useState(!1),[a,g]=r.useState(null),[m,N]=r.useState(null),{user:h}=C(),x=h?h.id:0;r.useEffect(()=>{(async()=>{d(!0);try{const s=await o.get(`http://white-emu-581912.hostingersite.com/api/user/orders/${x}`,{headers:{"Content-Type":"application/json"}});g(s.data.user),console.log(s.data.user)}catch(s){N(s.message)}finally{d(!1)}})()},[x]);const y=async t=>{try{await o.delete(`http://white-emu-581912.hostingersite.com/api/order/delete/${t}`),c(s=>s.filter(n=>n.id!==t)),window.location.reload()}catch(s){console.error("Failed to delete activity:",s)}},b=async t=>{try{await o.put(`http://white-emu-581912.hostingersite.com/api/order/update/${t}`),j(s=>s.filter(n=>n.id!==t))}catch(s){console.error("Failed to update activity:",s)}};return f?e.jsx("p",{className:"h2 text-center",children:"Fetching product list data..."}):m?e.jsx(P,{className:"text-center text-dark",message:m}):e.jsxs("div",{className:"table-responsive small",children:[e.jsx("p",{className:"h2 text-center",children:"Product List"}),e.jsx("p",{className:"h3 text-warning col-md d-flex justify-content-md-end me-5",children:`Total Orders: ${(a==null?void 0:a.totalUserOrders)||0}`}),e.jsxs(S,{className:"table table-striped",children:[e.jsx("thead",{className:"text-center",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Item"}),e.jsx("th",{scope:"col",children:"Item Name"}),e.jsx("th",{scope:"col",children:"Quantity"}),e.jsx("th",{scope:"col",children:"Target Date"}),e.jsx("th",{scope:"col",children:"Total Price"}),e.jsx("th",{scope:"col",children:"Actions"})]})}),e.jsx("tbody",{className:"text-center",children:(u=a==null?void 0:a.orders)==null?void 0:u.map(t=>e.jsxs("tr",{className:"p-lg-5",children:[e.jsx("td",{children:e.jsx("img",{src:`${I.FETCH_IMAGE}/${t.image}`,alt:"image not available",style:{height:"10rem"}})}),e.jsx("td",{children:t.productName}),e.jsx("td",{children:t.quantity}),e.jsx("td",{children:t.targetDate}),e.jsx("td",{children:`â‚±${t.totalPrice}`}),e.jsxs("td",{className:"row d-flex justify-content-md-end me-2",children:[e.jsx(p,{className:"btn-dark col-md-7 mb-sm-2 p-sm-4",onClick:()=>b(t.id),children:"Edit"}),e.jsx(p,{className:"btn-danger col-md-7 p-sm-4 mb-sm-2",onClick:()=>{window.confirm(`Do you want to remove ${t.productName}?`)&&y(t.id)},children:"Delete"})]})]},t.id))})]})]})},H=()=>e.jsxs(e.Fragment,{children:[e.jsx($,{}),e.jsx(T,{}),e.jsx(F,{})]});export{H as default};
