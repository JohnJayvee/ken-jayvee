import{r as o,j as e,L as j}from"./index-ud2iyfy7.js";import{B as w}from"./Button-Cmlg19D4.js";import{I as n}from"./InputBlock-CWCKNJCv.js";import{l as v}from"./logo-transparent-yviwR2yx.js";import{a as N}from"./axios-B4uVmeYG.js";function _(){const[p,l]=o.useState(""),[a,x]=o.useState({}),[g,u]=o.useState(!1),[r,m]=o.useState({name:"",email:"",username:"",password:"",password_confirmation:"",image:null}),t=d=>{const{name:i,value:s,files:f}=d.target;m(i==="image"?c=>({...c,image:f[0]}):c=>({...c,[i]:s}))},h=async d=>{d.preventDefault(),l(""),x({}),u(!0);const i=new FormData;Object.keys(r).forEach(s=>{i.append(s,r[s])});try{const s=await N.post("http://white-emu-581912.hostingersite.com/api/user/register",i,{headers:{"Content-Type":"multipart/form-data"}});console.log("User Registered Successfully",s.data),window.location.replace("/login"),m({name:"",email:"",username:"",password:"",password_confirmation:"",image:null})}catch(s){s.response&&s.response.status===422?(x(s.response.data.errors),l("Please check all the fields")):(console.error("Error submitting registration form:",s),l("An unexpected error occurred. Please try again."))}finally{u(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center align-items-center min-vh-100",children:e.jsx("div",{className:"col-12 col-md-12 col-lg-4",children:e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("img",{src:v,alt:"Logo",style:{maxWidth:"150px"}})}),e.jsx("p",{className:"text-center h3 text-dark",children:"Sign up"}),p&&e.jsx("div",{className:"text-center text-danger mb-3",children:p}),e.jsxs("form",{className:"text-dark",onSubmit:h,encType:"multipart/form-data",noValidate:!0,children:[e.jsx(n,{type:"text",name:"name",id:"name",label:"Fullname",onChange:t,value:r.name}),a.name&&e.jsx("div",{className:"text-danger",children:a.name[0]}),e.jsx(n,{type:"text",name:"email",id:"email",label:"Email",onChange:t,value:r.email}),a.email&&e.jsx("div",{className:"text-danger",children:a.email[0]}),e.jsx(n,{type:"text",name:"username",id:"username",label:"Username",onChange:t,value:r.username}),a.username&&e.jsx("div",{className:"text-danger",children:a.username[0]}),e.jsx(n,{type:"password",name:"password",id:"password",label:"Password",onChange:t,value:r.password}),a.password&&e.jsx("div",{className:"text-danger",children:a.password[0]}),e.jsx(n,{type:"password",name:"password_confirmation",id:"password_confirmation",label:"Confirm Password",onChange:t,value:r.password_confirmation}),a.password_confirmation&&e.jsx("div",{className:"text-danger",children:a.password_confirmation[0]}),e.jsx(n,{type:"file",name:"image",id:"image",label:"Profile Image",onChange:t}),a.image&&e.jsx("div",{className:"text-danger",children:a.image[0]}),e.jsx(w,{className:"btn-dark w-100",type:"submit",disabled:g,children:g?"Registering...":"Register"}),e.jsx("div",{className:"text-sm mt-2",children:e.jsxs("p",{className:"h6",children:["Have an account?"," ",e.jsx(j,{className:"text-danger link-underline-light",to:"/login",children:"Login"})]})})]})]})})})})})})}export{_ as default};
