import{j as e,r,C as b,U as w,a as E}from"./index-ud2iyfy7.js";import{H as C,F as $}from"./Footer-DAd9gets.js";import{A as F}from"./BaseUrl-6_kCCrH9.js";import{E as I}from"./Error-C2F1-b9d.js";import{B as u}from"./Button-Cmlg19D4.js";import{a as o}from"./axios-B4uVmeYG.js";import"./auth-CC0Cby6h.js";function P({className:n="",children:c,...l}){return e.jsx(e.Fragment,{children:e.jsx("table",{className:`table ${n}`,...l,children:c})})}const S=()=>{var x;r.useContext(b);const[n,c]=r.useState([]),[l,p]=r.useState([]);r.useState(!1),r.useContext(w),r.useState(null);const[j,d]=r.useState(!1),[a,f]=r.useState(null),[m,g]=r.useState(null),{user:h}=E();r.useEffect(()=>{(async()=>{d(!0);try{const s=await o.get(`http://white-emu-581912.hostingersite.com/api/user/orders/${h.id}`);f(s.data.user),console.log(s.data.user)}catch(s){g(s.message)}finally{d(!1)}})()},[h.id]);const N=async t=>{try{await o.delete(`http://white-emu-581912.hostingersite.com/api/order/delete/${t}`),c(s=>s.filter(i=>i.id!==t)),window.location.reload()}catch(s){console.error("Failed to delete activity:",s)}},y=async t=>{try{await o.put(`http://white-emu-581912.hostingersite.com/api/order/update/${t}`),p(s=>s.filter(i=>i.id!==t))}catch(s){console.error("Failed to update activity:",s)}};return j?e.jsx("p",{className:"h2 text-center",children:"Fetching product list data..."}):m?e.jsx(I,{className:"text-center text-dark",message:m}):e.jsxs("div",{className:"table-responsive small",children:[e.jsx("p",{className:"h2 text-center",children:"Product List"}),e.jsx("p",{className:"h3 text-warning col-md d-flex justify-content-md-end me-5",children:`Total Orders: ${(a==null?void 0:a.totalUserOrders)||0}`}),e.jsxs(P,{className:"table table-striped",children:[e.jsx("thead",{className:"text-center",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Item"}),e.jsx("th",{scope:"col",children:"Item Name"}),e.jsx("th",{scope:"col",children:"Quantity"}),e.jsx("th",{scope:"col",children:"Target Date"}),e.jsx("th",{scope:"col",children:"Total Price"}),e.jsx("th",{scope:"col",children:"Actions"})]})}),e.jsx("tbody",{className:"text-center",children:(x=a==null?void 0:a.orders)==null?void 0:x.map(t=>e.jsxs("tr",{className:"p-lg-5",children:[e.jsx("td",{children:e.jsx("img",{src:`${F.FETCH_IMAGE}/${t.image}`,alt:"image not available",style:{height:"10rem"}})}),e.jsx("td",{children:t.productName}),e.jsx("td",{children:t.quantity}),e.jsx("td",{children:t.targetDate}),e.jsx("td",{children:`â‚±${t.totalPrice}`}),e.jsxs("td",{className:"row d-flex justify-content-md-end me-2",children:[e.jsx(u,{className:"btn-dark col-md-7 mb-sm-2 p-sm-4",onClick:()=>y(t.id),children:"Edit"}),e.jsx(u,{className:"btn-danger col-md-7 p-sm-4 mb-sm-2",onClick:()=>{window.confirm(`Do you want to remove ${t.productName}?`)&&N(t.id)},children:"Delete"})]})]},t.id))})]})]})},U=()=>e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx(S,{}),e.jsx($,{})]});export{U as default};
